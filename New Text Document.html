<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TubeBoost Hub | مجهز بمفتاحك الخاص</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;900&display=swap');
        body { font-family: 'Cairo', sans-serif; background-color: #0f0f0f; color: #ffffff; }
        .glass { background: #1e1e1e; border: 1px solid #333; border-radius: 1rem; }
        .yt-red { color: #ff0000; }
        .btn-gradient { background: linear-gradient(90deg, #ff0000, #cc0000); transition: 0.3s; }
        .btn-gradient:hover { opacity: 0.9; transform: scale(1.02); }
        .loading-spinner { width: 30px; height: 30px; border: 3px solid #333; border-top: 3px solid #ff0000; border-radius: 50%; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .content-area h1 { font-size: 1.8rem; font-weight: 900; margin-bottom: 1.5rem; color: #fff; }
        .content-area h2 { font-size: 1.5rem; font-weight: bold; margin-top: 1.5rem; color: #ff4d4d; border-right: 3px solid #ff0000; padding-right: 10px; margin-bottom: 1rem; }
        .content-area p { margin-bottom: 1rem; line-height: 1.8; color: #ccc; }
        .content-area ul { list-style-type: disc; margin-right: 1.5rem; margin-bottom: 1rem; color: #bbb; }
        .content-area li { margin-bottom: 0.5rem; }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-4xl mx-auto">
        <div class="text-center mb-10">
            <h1 class="text-4xl font-black mb-2"><i class="fab fa-youtube yt-red"></i> TubeBoost <span class="yt-red">Pro</span></h1>
            <p class="text-gray-400">أداة صناعة المحتوى الذكي المدعومة بـ Gemini</p>
        </div>

        <div class="glass p-6 mb-6">
            <div class="flex flex-col gap-4">
                <input id="topic" type="text" placeholder="اكتب عنوان الموضوع هنا..." 
                    class="w-full bg-black border border-gray-700 p-4 rounded-lg focus:outline-none focus:border-red-600 text-lg">
                
                <button id="genBtn" onclick="startGeneration()" class="btn-gradient w-full py-4 rounded-lg font-bold text-lg flex items-center justify-center gap-3">
                    <span id="btnText">ابدأ التحليل والإنشاء</span>
                    <div id="btnLoader" class="loading-spinner hidden"></div>
                </button>
            </div>
        </div>

        <div id="errorBox" class="hidden bg-red-900/20 border border-red-600 text-red-400 p-4 rounded-lg mb-6 text-center"></div>

        <div id="output" class="hidden glass p-6 md:p-10 animate-fade-in">
            <div class="flex justify-between items-center mb-6 border-b border-gray-800 pb-4">
                <h3 class="text-xl font-bold">المحتوى المُولد:</h3>
                <button onclick="copyText()" class="text-sm bg-gray-800 hover:bg-gray-700 px-4 py-2 rounded">
                    <i class="fas fa-copy"></i> نسخ النص
                </button>
            </div>
            <div id="contentBody" class="content-area"></div>
        </div>
    </div>

    <script>
        /***********************************************************
         * ضع مفتاح الـ API الخاص بك بين علامتي التنصيص في السطر التالي:
         ***********************************************************/
        const apiKey = "AIzaSyCdCNeJWbTakG7DWIQB0rbSMrz7JUZSCPs"; // <--- الصق المفتاح هنا

        async function startGeneration() {
            const topic = document.getElementById('topic').value;
            const btnText = document.getElementById('btnText');
            const btnLoader = document.getElementById('btnLoader');
            const output = document.getElementById('output');
            const errorBox = document.getElementById('errorBox');

            if (!topic) return;
            
            // إصلاح الخطأ البرمجي في السطر التالي بإضافة علامة الاقتباس المفقودة
            if (!apiKey) {
                errorBox.innerText = "خطأ: لم تضع مفتاح الـ API داخل الكود!";
                errorBox.classList.remove('hidden');
                return;
            }

            // UI State
            errorBox.classList.add('hidden');
            btnText.innerText = "جاري العمل...";
            btnLoader.classList.remove('hidden');
            output.classList.add('hidden');

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        contents: [{ parts: [{ text: `اكتب مقالاً احترافياً ومتوافقاً مع السيو (SEO) باللغة العربية حول موضوع: ${topic}. استخدم تنسيق HTML واضح يتضمن (h2, p, ul, li) ولا تستخدم رموز الماركداون مثل النجوم أو الشرطات، بل استخدم وسوم HTML فقط.` }] }],
                        tools: [{ "google_search": {} }]
                    })
                });

                const data = await response.json();
                
                if (data.error) throw new Error(data.error.message);

                const rawContent = data.candidates[0].content.parts[0].text;
                
                // تنظيف المخرجات من أي وسوم ماركداون قد تظهر
                const cleanHtml = rawContent.replace(/```html|```/g, '').trim();

                document.getElementById('contentBody').innerHTML = cleanHtml;
                output.classList.remove('hidden');
                window.scrollTo({ top: output.offsetTop - 50, behavior: 'smooth' });

            } catch (err) {
                errorBox.innerText = "حدث خطأ في الاتصال: " + err.message;
                errorBox.classList.remove('hidden');
            } finally {
                btnText.innerText = "ابدأ التحليل والإنشاء";
                btnLoader.classList.add('hidden');
            }
        }

        function copyText() {
            const text = document.getElementById('contentBody').innerText;
            const tempInput = document.createElement("textarea");
            tempInput.value = text;
            document.body.appendChild(tempInput);
            tempInput.select();
            document.execCommand("copy");
            document.body.removeChild(tempInput);
            alert("تم النسخ بنجاح!");
        }
    </script>
</body>
</html>